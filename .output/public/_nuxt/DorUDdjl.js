import{_ as z}from"./By3AFHdq.js";import{e as E,f as F,g as L,h as U,i as q,j as G,r as I,s as B,k as W,n as $,l as J,m,p as Q,q as X,v as Y,x as Z,y as x,c as K,a as g,b as O,w as S,t as C,o as k,d as T}from"./Bhay6O9c.js";const A={trailing:!0};function aa(a,e=25,o={}){if(o={...A,...o},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let i,s,n=[],t,v;const c=(f,r)=>(t=ea(a,f,r),t.finally(()=>{if(t=null,o.trailing&&v&&!s){const _=c(f,v);return v=null,_}}),t);return function(...f){return t?(o.trailing&&(v=f),t):new Promise(r=>{const _=!s&&o.leading;clearTimeout(s),s=setTimeout(()=>{s=null;const p=o.leading?i:c(this,f);for(const y of n)y(p);n=[]},e),_?(i=c(this,f),r(i)):n.push(r)})}}async function ea(a,e,o){return await a.apply(e,o)}const ta=Symbol.for("nuxt:client-only");function sa(...a){const e=typeof a[a.length-1]=="string"?a.pop():void 0;na(a[0],a[1])&&a.unshift(e);let[o,i,s={}]=a;const n=E(()=>G(o));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const t=F();s.server??=!0,s.default??=ia,s.getCachedData??=M,s.lazy??=!1,s.immediate??=!0,s.deep??=L.deep,s.dedupe??="cancel",s._functionName,t._asyncData[n.value];const v={cause:"initial",dedupe:s.dedupe};t._asyncData[n.value]?._init||(v.cachedData=s.getCachedData(n.value,t,{cause:"initial"}),t._asyncData[n.value]=j(t,n.value,i,s,v.cachedData));const c=t._asyncData[n.value];c._deps++;const f=()=>t._asyncData[n.value].execute(v),r=s.server!==!1&&t.payload.serverRendered;{let y=function(u){const d=t._asyncData[u];d?._deps&&(d._deps--,d._deps===0&&d?._off())};const l=X();if(l&&r&&s.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const u=l._nuxtOnBeforeMountCbs;Y(()=>{u.forEach(d=>{d()}),u.splice(0,u.length)}),Z(()=>u.splice(0,u.length))}const b=l&&(l._nuxtClientOnly||x(ta,!1));r&&t.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":l&&(!b&&t.payload.serverRendered&&t.isHydrating||s.lazy)&&s.immediate?l._nuxtOnBeforeMountCbs.push(f):s.immediate&&c.status.value!=="success"&&f();const D=Q(),h=U([n,...s.watch||[]],([u],[d])=>{if((u||d)&&u!==d){const N=t._asyncData[d]?.data.value!==void 0,H=t._asyncDataPromises[d]!==void 0;d&&y(d);const R={cause:"initial",dedupe:s.dedupe};if(!t._asyncData[u]?._init){let P;d&&N?P=t._asyncData[d]?.data.value:(P=s.getCachedData(u,t,{cause:"initial"}),R.cachedData=P),t._asyncData[u]=j(t,u,i,s,P)}t._asyncData[u]._deps++,(s.immediate||N||H)&&t._asyncData[u].execute(R)}else c._execute({cause:"watch",dedupe:s.dedupe})},{flush:"sync"});D&&q(()=>{h(),y(n.value)})}const _={data:w(()=>t._asyncData[n.value]?.data),pending:w(()=>t._asyncData[n.value]?.pending),status:w(()=>t._asyncData[n.value]?.status),error:w(()=>t._asyncData[n.value]?.error),refresh:(...y)=>t._asyncData[n.value].execute(...y),execute:(...y)=>t._asyncData[n.value].execute(...y),clear:()=>V(t,n.value)},p=Promise.resolve(t._asyncDataPromises[n.value]).then(()=>_);return Object.assign(p,_),p}function w(a){return E({get(){return a()?.value},set(e){const o=a();o&&(o.value=e)}})}function na(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function V(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=void 0),a._asyncData[e]&&(a._asyncData[e].data.value=m(a._asyncData[e]._default()),a._asyncData[e].error.value=void 0,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function ra(a,e){const o={};for(const i of e)o[i]=a[i];return o}function j(a,e,o,i,s){a.payload._errors[e]??=void 0;const n=i.getCachedData!==M,t=o,v=i.deep?I:B,c=s!==void 0,f=a.hook("app:data:refresh",async _=>{(!_||_.includes(e))&&await r.execute({cause:"refresh:hook"})}),r={data:v(c?s:i.default()),pending:E(()=>r.status.value==="pending"),error:W(a.payload._errors,e),status:B("idle"),execute:(..._)=>{const[p,y=void 0]=_,l=p&&y===void 0&&typeof p=="object"?p:{};if(a._asyncDataPromises[e]){if((l.dedupe??i.dedupe)==="defer")return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}{const D="cachedData"in l?l.cachedData:i.getCachedData(e,a,{cause:l.cause??"refresh:manual"});if(D!==void 0)return a.payload.data[e]=r.data.value=D,r.error.value=void 0,r.status.value="success",Promise.resolve(D)}r.status.value="pending";const b=new Promise((D,h)=>{try{D(t(a))}catch(u){h(u)}}).then(async D=>{if(b.cancelled)return a._asyncDataPromises[e];let h=D;i.transform&&(h=await i.transform(D)),i.pick&&(h=ra(h,i.pick)),a.payload.data[e]=h,r.data.value=h,r.error.value=void 0,r.status.value="success"}).catch(D=>{if(b.cancelled)return a._asyncDataPromises[e];r.error.value=J(D),r.data.value=m(i.default()),r.status.value="error"}).finally(()=>{b.cancelled||delete a._asyncDataPromises[e]});return a._asyncDataPromises[e]=b,a._asyncDataPromises[e]},_execute:aa((..._)=>r.execute(..._),0,{leading:!0}),_default:i.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{f(),a._asyncData[e]?._init&&(a._asyncData[e]._init=!1),n||$(()=>{a._asyncData[e]?._init||(V(a,e),r.execute=()=>Promise.resolve())})}};return r}const ia=()=>{},M=(a,e,o)=>{if(e.isHydrating)return e.payload.data[a];if(o.cause!=="refresh:manual"&&o.cause!=="refresh:hook")return e.static.data[a]},ca={class:"data"},la={__name:"about",setup(a){const{data:e,error:o,pending:i,refresh:s,clear:n,status:t}=sa("about",()=>$fetch("https://yesno.wtf/api"),{lazy:!0});return(v,c)=>{const f=z;return k(),K("div",null,[c[4]||(c[4]=g("h1",null,"About page",-1)),O(f,{to:"/"},{default:S(()=>c[2]||(c[2]=[T("Home page",-1)])),_:1,__:[2]}),O(f,{to:"/phone"},{default:S(()=>c[3]||(c[3]=[T("Contact page",-1)])),_:1,__:[3]}),g("div",ca,[g("pre",null,"Data = "+C(m(e)),1),g("pre",null,"Error = "+C(m(o)),1),g("pre",null,"Pending = "+C(m(i)),1),g("pre",null,"Refresh = "+C(m(s)),1),g("pre",null,"Status = "+C(m(t)),1),g("button",{onClick:c[0]||(c[0]=(...r)=>m(s)&&m(s)(...r))},"Refresh"),g("button",{onClick:c[1]||(c[1]=(...r)=>m(n)&&m(n)(...r))},"Clear")])])}}};export{la as default};
